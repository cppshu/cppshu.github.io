{{/* Volunteer profile page. */}}

{{- define "main" -}}

{{ $page := . }}


{{/* If an account has not been created for this user, just display their name as the title. */}}
{{ if not .File }}
<div class="universal-wrapper pt-3">
  <h1 itemprop="name">{{ .Title }}</h1>
</div>
{{ end }}

<section id="profile-page" class="pt-5">
  <div class="container">
    {{/* Show the About widget if an account exists for this user. */}}
    {{ if .File }}
      {{ $widget := "widgets/about.html" }}
      {{ $username := (path.Base (path.Split .Path).Dir) }}{{/* Alternatively, use `index .Params.volunteers 0` */}}
      {{ $params := dict "root" $ "page" . "volunteer" $username }}
      {{ partial $widget $params }}
    {{end}}

    <h3> He/She has contributed to those Yuanyou projects : </h3>

    {{ range $items_type := (slice "salon" "news") }}

      {{ $query_tmp := where $page.Pages ".IsNode" false }}

      {{ $query := where $query_tmp "Type" (printf "%s" $items_type) }}

      {{ $count := len $query }}
      {{ if $count }}
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3> {{ printf "%s" $items_type }} : </h3>
        <ul>
          {{ range $query }}
          <li>
            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
          </li>
          {{ end }}
        </ul>
      </div>
      {{ end }}
    {{ end }}
  </div>
</section>

{{- end -}}
